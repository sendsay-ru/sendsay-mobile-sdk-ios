## Отправка данных

SDK кэширует данные (сессии, события, свойства клиентов и т.д.) во внутренней базе данных и периодически отправляет их в CDP Sendsay. После загрузки данных значения в базе данных аккаунта Sendsay обновляются, а кэшированные данные удаляются из внутренней базы данных SDK. Этот процесс называется **отправкой данных**.

По умолчанию SDK автоматически отправляет данные, как только они отслеживаются, или когда приложение переходит в фоновый режим. Вы можете настроить [режим отправки](#flushing-modes), чтобы адаптировать это поведение под ваши потребности.

Вы также можете полностью отключить автоматическую отправку. В этом случае вы должны [вручную отправлять](#manual-flushing) данные каждый раз, когда есть данные для отправки.

SDK будет отправлять данные только при наличии стабильного сетевого соединения. Если во время отправки произойдет ошибка соединения, данные останутся в кэше до тех пор, пока соединение не стабилизируется и данные не будут успешно отправлены.

## Режимы отправки

SDK поддерживает следующие 4 режима отправки для указания того, как часто или если данные отправляются автоматически.

| Название               | Описание |
| ---------------------- | ----------- |
| `.immediate` (по умолчанию) | Отправляет все данные немедленно по мере их получения. |
| `.automatic`           | Отправляет данные каждый раз, когда приложение теряет активное состояние. |
| `.periodic(Int)`       | Отправляет данные в указанном интервале (в секундах) и когда приложение закрывается или переходит в фоновый режим. |
| `.manual`              | Отключает любую автоматическую загрузку. Разработчик несет ответственность за [ручную отправку данных](#manual-flushing). |

Чтобы установить режим отправки, сначала [инициализируйте SDK](docs/ios-sdk-setup.md), затем установите `flushingMode` напрямую в синглтоне `Sendsay`:

```swift
Sendsay.shared.flushingMode = .periodic(10)
```

## Ручная отправка

Для ручного запуска отправки данных в API используйте следующий метод:

```swift
Sendsay.shared.flushData()
```